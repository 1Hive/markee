specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  # TopDawgStrategy - Markee Cooperative home message for markee.xyz
  - kind: ethereum
    name: TopDawgStrategy
    network: base
    source:
      address: "0x558EB41ec9Cc90b86550617Eef5f180eA60e0e3a"
      abi: TopDawgStrategy
      startBlock: 39753461
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Markee
        - TopDawgStrategy
        - FundsAdded
        - MessageUpdate
        - NameUpdate
        - GlobalStats
      abis:
        - name: TopDawgStrategy
          file: ./abis/TopDawgStrategy.json
        - name: Markee
          file: ./abis/Markee.json
      eventHandlers:
        - event: MarkeeCreated(indexed address,indexed address,string,string,uint256)
          handler: handleMarkeeCreated
        - event: FundsAddedToMarkee(indexed address,indexed address,uint256,uint256,uint256)
          handler: handleFundsAddedToMarkee
        - event: MessageUpdated(indexed address,indexed address,string)
          handler: handleMessageUpdated
        - event: NameUpdated(indexed address,indexed address,string)
          handler: handleNameUpdated
        - event: InstanceNameUpdated(string,string)
          handler: handleInstanceNameUpdated
      file: ./src/topdawg-strategy.ts

  # TopDawgPartnerStrategy - Gardens Platform
  - kind: ethereum
    name: TopDawgPartnerStrategyGardens
    network: base
    source:
      address: "0x346419315740F085Ba14cA7239D82105a9a2BDBE"
      abi: TopDawgPartnerStrategy
      startBlock: 39753461
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Markee
        - TopDawgPartnerStrategy
        - PartnerFundsAdded
        - MessageUpdate
        - NameUpdate
        - GlobalStats
      abis:
        - name: TopDawgPartnerStrategy
          file: ./abis/TopDawgPartnerStrategy.json
        - name: Markee
          file: ./abis/Markee.json
      eventHandlers:
        - event: MarkeeCreated(indexed address,indexed address,string,string,uint256,uint256,uint256)
          handler: handlePartnerMarkeeCreated
        - event: FundsAddedToMarkee(indexed address,indexed address,uint256,uint256,uint256,uint256,uint256)
          handler: handlePartnerFundsAddedToMarkee
        - event: MessageUpdated(indexed address,indexed address,string)
          handler: handlePartnerMessageUpdated
        - event: NameUpdated(indexed address,indexed address,string)
          handler: handlePartnerNameUpdated
        - event: InstanceNameUpdated(string,string)
          handler: handlePartnerInstanceNameUpdated
        - event: BeneficiaryAddressUpdated(indexed address,indexed address)
          handler: handleBeneficiaryAddressUpdated
        - event: PercentToBeneficiaryUpdated(uint256,uint256)
          handler: handlePercentToBeneficiaryUpdated
      file: ./src/topdawg-partner-strategy.ts

  # FixedPriceStrategy 1 - hero message #1.
  - kind: ethereum
    name: FixedPriceStrategy1
    network: base
    source:
      address: "0x35BBbF93395501678bAAd5898B73ab0778f5d303"
      abi: FixedPriceStrategy
      startBlock: 39753461
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - FixedPriceStrategy
        - FixedPriceMessageChange
        - GlobalStats
      abis:
        - name: FixedPriceStrategy
          file: ./abis/FixedPriceStrategy.json
        - name: Markee
          file: ./abis/Markee.json
      eventHandlers:
        - event: MessageChanged(indexed address,string,string,uint256)
          handler: handleFixedPriceMessageChanged
      file: ./src/fixed-strategy.ts

  # FixedPriceStrategy 2 - hero message #2.
  - kind: ethereum
    name: FixedPriceStrategy2
    network: base
    source:
      address: "0x279ecAd5167bfa400b2C2bab32668ed6B88a49Dd"
      abi: FixedPriceStrategy
      startBlock: 39753461
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - FixedPriceStrategy
        - FixedPriceMessageChange
        - GlobalStats
      abis:
        - name: FixedPriceStrategy
          file: ./abis/FixedPriceStrategy.json
        - name: Markee
          file: ./abis/Markee.json
      eventHandlers:
        - event: MessageChanged(indexed address,string,string,uint256)
          handler: handleFixedPriceMessageChanged
      file: ./src/fixed-strategy.ts

  # FixedPriceStrategy 3 - hero message #3.
  - kind: ethereum
    name: FixedPriceStrategy3
    network: base
    source:
      address: "0x4ceAadA2108526A94c3382D3AEE36B8888bCA335"
      abi: FixedPriceStrategy
      startBlock: 39753461
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - FixedPriceStrategy
        - FixedPriceMessageChange
        - GlobalStats
      abis:
        - name: FixedPriceStrategy
          file: ./abis/FixedPriceStrategy.json
        - name: Markee
          file: ./abis/Markee.json
      eventHandlers:
        - event: MessageChanged(indexed address,string,string,uint256)
          handler: handleFixedPriceMessageChanged
      file: ./src/fixed-strategy.ts

templates:
  # Template for dynamically created Markee contracts from TopDawg
  - kind: ethereum/contract
    name: Markee
    network: base
    source:
      abi: Markee
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Markee
        - MessageUpdate
        - NameUpdate
        - FundsAdded
        - GlobalStats
      abis:
        - name: Markee
          file: ./abis/Markee.json
      eventHandlers:
        - event: MessageChanged(string,indexed address)
          handler: handleMessageChanged
        - event: NameChanged(string,indexed address)
          handler: handleNameChanged
        - event: FundsAdded(uint256,uint256,indexed address)
          handler: handleFundsAdded
      file: ./src/markee.ts
